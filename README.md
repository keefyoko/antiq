2 разные проблемы
проблема нехватки данных
и проблема мокового id
определяют проблему оптимистичного создания/изменения

при создании сущности все её поля считаются полученными

у put есть опция awaitId

cancelOptimisticPut
вместо последнего
должен подставляться последний подтверждённый
иначе картинка
0 1-2-0-2 картинки быть не может, updated_at новее
0 1-2-0-1 картинки быть не может, всё-таки есть синхронность

async function e() {
await g.door.author.oki()
console.log('e')
await g.door.author.oki()
console.log('a')
}

если в ивенте было два put

const a = await a.put('oki')
const b = await b.put({ doki: a.id })

оба они оптимистичны

если во время изменения ошибка предыдущего изменения
cancel()
приходит ответ на следующее изменение

на cancel мы не возвращаем значение, если оно изменилось после

при подтверждении put:
обновляются updated_at

отмена put

put

1. добавляем объект в g.value
2. при новом put изменяем его же
3. при отмене ошибки подставляем значение из g.val
4. если приходит с сервера значение после отмены ошибки, подставляем его (value и val)
   (отмена ошибки влияет только на временное значение)

картинка: изменение, изменение, ошибка, успех
что делать?

две ошибки подряд - две возможности вернуть последний успех?

кнопка "повторить" при ошибке может затереть последние данные

на "вернуть" мы возвращаем данные по дате
если ошибочном в запросе updated_at < value.updated_at
то поле не возвращаем

put меняет поля сущности
две ошибки подряд на изменение одного поля
две ошибки подряд на изменение разных полей
две ошибки подряд на изменение и одного и разных полей

во время запроса на изменение может придти другой запрос с изменениями
эти изменения мы подставляем в g.val
а в g.value точно так же - только самые свежие изменения

изменили name
ждём
изменили ещё раз
ошибка первого изменения
ждём
ошибка второго изменения

в массивах всегда id
они передаются компонентам детей
родители не ререндерятся по умолчанию при изменении детей
точечно по максимуму

категоризировать каждую вещь на фотографии в плане процесса уборки

ререндер целого списка при изменении ребёнка, который не используется в компоненте
